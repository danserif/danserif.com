<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />

		<title>@danserif ~/bookmarks</title>

		<meta name="description" content="Bookmarks. URLs. Hyperlinks. Domains. Hrefs." />
		<meta name="author" content="Dan Newman" />
		<meta name="copyright" content="Copyright Dan Newman, 2026" />

		<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />

		<link rel="stylesheet" href="/styles.css" />

		<link rel="preload" href="/fonts/berkeley-mono.woff2" as="font" type="font/woff2" crossorigin="anonymous" />

		<link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" />
		<link rel="icon" type="image/png" href="https://danserif.com/icons/favicon-16x16.png" sizes="16x16" />
		<link rel="icon" type="image/png" href="https://danserif.com/icons/favicon-32x32.png" sizes="32x32" />
		<link rel="icon" type="image/png" href="https://danserif.com/icons/icon.png" sizes="1024x1024" />
		<link rel="apple-touch-icon" href="https://danserif.com/icons/apple-touch-icon.png" sizes="1024x1024" />
		<link rel="mask-icon" href="https://danserif.com/icons/safari-pinned-tab.svg" color="#000000" />

		<meta name="apple-mobile-web-app-capable" content="yes" />
		<meta name="apple-mobile-web-app-status-bar-style" content="#000000" />

		<meta name="theme-color" content="#000000" />

		<meta property="og:title" content="@danserif ~/bookmarks" />
		<meta property="og:description" content="Bookmarks. URLs. Hyperlinks. Domains. Hrefs." />
		<meta property="og:image" content="https://danserif.com/images/opengraph-image-bookmarks.png" />
		<meta property="og:image:type" content="image/png" />
		<meta property="og:image:alt" content="Dan Newman — Bookmarks" />
		<meta property="og:image:width" content="1200" />
		<meta property="og:image:height" content="630" />
		<meta property="og:site_name" content="danserif.com" />

		<meta name="twitter:card" content="summary_large_image" />
		<meta name="twitter:title" content="@danserif ~/bookmarks" />
		<meta name="twitter:description" content="Bookmarks. URLs. Hyperlinks. Domains. Hrefs." />
		<meta name="twitter:image" content="https://danserif.com/images/opengraph-image-bookmarks.png" />
		<meta name="twitter:site" content="danserif.com" />

		<script src="https://cdn.usefathom.com/script.js" data-site="YGLQBNIN" defer></script>
	</head>

	<body id="top">
		<header>
			<h1><a class="hover" href="/" onclick="fathom.trackEvent('Home', 0);">danserif.com</a><span class="opacity-dark">/bookmarks</span></h1>
			<p class="caption">&#8985; @danserif <span class="opacity-light">(Handle)</span></p>
		</header>

		<nav>
			<ul>
				<li class="label">[Menu]</li>
				<li><a href="/newsletter/" onclick="fathom.trackEvent('Newsletter', 0);">Newsletter</a> <span class="opacity-dark">(1)</span></li>
				<li><a class="highlight" href="/bookmarks/" onclick="fathom.trackEvent('Bookmarks', 0);">Bookmarks</a></li>
				<li><a href="/about/" onclick="fathom.trackEvent('About', 0);">About</a></li>
			</ul>
			<!-- MOBILE -->
			<div class="mobile menu">
				<ul id="menu">
					<li class="title">[Menu]</li>
					<li class="link"><a href="/" onclick="fathom.trackEvent('Home', 0);">Home</a></li>
					<li class="link"><a href="/newsletter/" onclick="fathom.trackEvent('Newsletter', 0);">Newsletter</a></li>
					<li class="link"><a href="/bookmarks/" onclick="fathom.trackEvent('Bookmarks', 0);">Bookmarks</a></li>
					<li class="link"><a href="/about/" onclick="fathom.trackEvent('About', 0);">About</a></li>
					<li class="title">[Contact]</li>
					<li class="inline">
						<span class="opacity">Email:</span>
						<a href="mailto:dan@newman.is" onclick="fathom.trackEvent('Email', 0);">dan <span class="opacity-light">[at]</span> newman <span class="opacity-light">[dot]</span> is</a>
					</li>
					<li class="inline">
						<span class="opacity">Follow:</span> <a href="https://linkedin.com/in/danserif" onclick="fathom.trackEvent('LinkedIn', 0);">LinkedIn</a> <span class="opacity-dark">/</span>
						<a href="https://twitter.com/danserif" onclick="fathom.trackEvent('Twitter', 0);">Twitter</a>
						<span class="opacity-dark">(RIP)</span>
					</li>
					<li class="title">[Mode]</li>
					<li class="inline"><a href="#" class="dark-mode-toggle">&#9654; Dark</a> <span class="opacity-dark">/</span> <a href="#" class="light-mode-toggle">&#9655; Light</a></li>
					<li class="logo">
						<a href="/">
							<svg xmlns="http://www.w3.org/2000/svg" xml:space="preserve" id="Layer_1" x="0" y="0" style="enable-background: new 0 0 109 82" version="1.1" viewBox="0 0 109 82">
								<style>
									.st0 {
										fill: #ffffff;
									}
								</style>
								<path
									d="M80 31.7v49.9h9V34.1c0-4.3 4.1-4.7 5.5-4.7s5.5.3 5.5 4.7v47.5h9V31.7c0-10.4-11.4-11.3-14.5-11.3S80 21.3 80 31.7zM71.7 81.7v-69c0-10.4-13.1-12-16.3-12s-16.3 1.6-16.3 12v69h9.7V56.1H62v25.6h9.7zm-22.9-36V15.1c0-4.3 5.1-4.7 6.6-4.7s6.6.3 6.6 4.7v30.6H48.8z"
									class="st0"
								/>
								<path
									d="M.4 52.7v-31h16.2c4.7 0 14.3 1.2 14.3 14.4v31.2c0 13.2-9.6 14.4-14.3 14.4H.4v-29zm9.7-.1v-23h4.7c3 0 6.4.2 6.4 8.9v25.9c0 8.7-3.4 8.9-6.4 8.9h-4.7V52.6z"
									style="fill-rule: evenodd; clip-rule: evenodd; fill: #ffffff"
								/>
							</svg>
						</a>
						<span class="caption opacity">&#8985; logo.svg <span class="opacity-light">(Braun & Dieter Rams Homage)</span></span>
					</li>
				</ul>
				<a href="javascript:void(0);" onclick="mobileMenu()">
					<i class="icon">
						<svg width="15" height="12" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M.75.75h14M.75 10.75h14M.75 5.75h14" stroke="currentColor" stroke-linejoin="round" /></svg
					></i>
				</a>
				<script>
					function mobileMenu() {
						var x = document.getElementById("menu");
						if (x.style.display === "block") {
							x.style.display = "none";
						} else {
							x.style.display = "block";
						}
					}
				</script>
			</div>
		</nav>

		<hr />

		<main>
			<section class="intro">
				<!-- LINKS -->
				<h2>[Links]</h2>
				<h3>
					Bookmarks.
					<span class="opacity">URLs. Hyperlinks. Domains. Hrefs.</span>
				</h3>
				<p>
					For years I’ve been collecting bookmarks <span class="opacity">(in Safari)</span> that have gradually died of <a href="https://en.wikipedia.org/wiki/Link_rot">link rot</a>. So with a little help from AI, I made
					a list that’s organized into the following categories:
					<span class="opacity">Latest, Inspiration, Foundries, Fonts, Studios <span class="opacity">/</span> Designers, Resources, Tools, Tech, Photography, News, and Cricket.</span>
				</p>
			</section>
			<section class="tables" id="links-container">
				<!-- ~/bookmarks.json -->
			</section>
			<script>
				// Extract domain and path from URL
				function getDomain(url) {
					try {
						const urlObj = new URL(url);
						const hostname = urlObj.hostname.replace(/^www\./, "");
						const pathname = urlObj.pathname;
						// Include path if it exists and is not just "/"
						return pathname && pathname !== "/" ? hostname + pathname : hostname;
					} catch (e) {
						return url;
					}
				}
				// Wrap text in brackets with opacity-dark span (for titles)
				function wrapBrackets(text) {
					return text.replace(/\(([^)]+)\)/g, '<span class="opacity-dark">($1)</span>');
				}
				// Wrap text in brackets with opacity-light span (for notes)
				function wrapBracketsInNotes(text) {
					return text.replace(/\(([^)]+)\)/g, '<span class="opacity-light">($1)</span>');
				}

				// Render a single link
				function renderLink(link) {
					// Process title to wrap brackets, then handle mobile version
					const processedTitle = wrapBrackets(link.title);
					const titleDisplay = link.titleMobile ? `<span class="hide">${processedTitle}</span><span class="desktop">${wrapBrackets(link.titleMobile)}</span>` : processedTitle;

					// Handle URL display: urlDisplay for desktop, urlMobile for mobile
					const regularDomain = getDomain(link.url);
					const desktopDomain = link.urlDisplay || regularDomain;
					const mobileDomain = link.urlMobile || regularDomain;

					// If both urlDisplay and urlMobile are provided, show different on desktop/mobile
					// Otherwise, if only one is provided, show it appropriately
					let domainDisplay;
					if (link.urlDisplay && link.urlMobile) {
						domainDisplay = `<span class="hide">${desktopDomain}</span><span class="desktop">${mobileDomain}</span>`;
					} else if (link.urlMobile) {
						domainDisplay = `<span class="hide">${regularDomain}</span><span class="desktop">${link.urlMobile}</span>`;
					} else if (link.urlDisplay) {
						domainDisplay = desktopDomain;
					} else {
						domainDisplay = regularDomain;
					}
					const linkRow = `
					<tr>
						<td>
							<a href="${link.url}" target="_blank" onclick="fathom.trackEvent('Link', 0);">${titleDisplay}</a>
						</td>
						<td><span class="opacity-dark">${domainDisplay}</span></td>
						<td class="arrow"><a href="${link.url}" target="_blank" onclick="fathom.trackEvent('Link', 0);">&nearr;</a></td>
					</tr>
				`;
					const noteRow = link.note
						? `
					<tr>
						<td colspan="2" class="note"><span class="opacity-dark">&#8985;</span> <span class="opacity">${wrapBracketsInNotes(link.note)}</span></td>
						<td></td>
					</tr>
				`
						: "";

					return linkRow + noteRow;
				}

				// Render a category (without column wrapper)
				function renderCategory(category) {
					if (!category.links || category.links.length === 0) {
						return "";
					}

					const linksHtml = category.links.map(renderLink).join("");

					// Add category note row if it exists
					const categoryNoteRow = category.note
						? `
					<tr>
						<td colspan="2"><span class="highlight">//</span><span class="opacity"> ${wrapBracketsInNotes(category.note)}</span></td>
						<td></td>
					</tr>
				`
						: "";

					return `
						<h3>[${category.name}]</h3>
						<table>
							<colgroup>
								<col style="width: 20%" />
								<col style="width: 80%" />
							</colgroup>
							${categoryNoteRow}${linksHtml}
						</table>
					`;
				}

				// Load and render all links
				let abortController = null;
				async function loadLinks() {
					// Cancel any pending request
					if (abortController) {
						abortController.abort();
					}
					
					// Create new AbortController for this request
					abortController = new AbortController();
					
					try {
						const response = await fetch("./bookmarks.json", {
							signal: abortController.signal
						});
						
						// Check if page is still active before processing
						if (document.hidden) {
							return;
						}
						
						if (!response.ok) {
							throw new Error(`HTTP error! status: ${response.status}`);
						}
						const data = await response.json();

						// Check again if page is still active before DOM manipulation
						if (document.hidden) {
							return;
						}

						const container = document.getElementById("links-container");
						if (!container) {
							return; // Page has unloaded
						}
						
						const columns = data.columns || [];

						if (columns.length === 0) {
							container.innerHTML = '<p class="opacity">No links found.</p>';
							return;
						}

						// Ensure we have exactly 4 columns (pad with empty columns if needed)
						while (columns.length < 4) {
							columns.push({ categories: [] });
						}

						let html = '<div class="row">';

						// First column-50: contains first two column-25 divs (columns 0 and 1)
						html += '<div class="column-50">';
						for (let i = 0; i < 2; i++) {
							const column = columns[i] || { categories: [] };
							const categories = column.categories || [];

							html += '<div class="column-25">';
							// Render each category in this column
							categories.forEach((category) => {
								html += renderCategory(category);
							});
							html += "</div>";
						}
						html += "</div>";

						// Second column-50: contains last two column-25 divs (columns 2 and 3)
						html += '<div class="column-50">';
						for (let i = 2; i < 4; i++) {
							const column = columns[i] || { categories: [] };
							const categories = column.categories || [];

							html += '<div class="column-25">';

							// Add image at the top of column 2 (3rd column, 2nd when stacked)
							if (i === 2) {
								html += `
							<h3>[PNG]</h3>
							<div class="image">
								<img srcset="/images/bookmarks.png 1x, /images/bookmarks-2x.png 2x" style="width: 100%; aspect-ratio: 1200 / 675" alt="ASCII Bookmarks" />
								<p class="caption">&#8985; <span class="opacity-light">/images/</span>bookmarks.png <span class="opacity-light">(ASCII)</span></p>
							</div>
						`;
							}

							// Render each category in this column
							categories.forEach((category) => {
								html += renderCategory(category);
							});
							html += "</div>";
						}
						html += "</div>";

						html += "</div>";

						// Final check before updating DOM
						if (!document.hidden && container) {
							container.innerHTML = html;
						}
					} catch (error) {
						// Ignore abort errors
						if (error.name === 'AbortError') {
							return;
						}
						console.error("Error loading links:", error);
						const container = document.getElementById("links-container");
						if (container && !document.hidden) {
							const errorMsg = error.message || "Blame AI";
							container.innerHTML = `<p class="opacity">My bad: ${errorMsg}.</p>`;
						}
					}
				}

				// Load links when page loads
				loadLinks();
				
				// Cancel fetch when page unloads
				window.addEventListener('beforeunload', function() {
					if (abortController) {
						abortController.abort();
					}
				});
			</script>
		</main>

		<footer>
			<div class="logo">
				<svg xmlns="http://www.w3.org/2000/svg" xml:space="preserve" id="Layer_1" x="0" y="0" style="enable-background: new 0 0 109 82" version="1.1" viewBox="0 0 109 82">
					<style>
						.st0 {
							fill: #ffffff;
						}
					</style>
					<path
						d="M80 31.7v49.9h9V34.1c0-4.3 4.1-4.7 5.5-4.7s5.5.3 5.5 4.7v47.5h9V31.7c0-10.4-11.4-11.3-14.5-11.3S80 21.3 80 31.7zM71.7 81.7v-69c0-10.4-13.1-12-16.3-12s-16.3 1.6-16.3 12v69h9.7V56.1H62v25.6h9.7zm-22.9-36V15.1c0-4.3 5.1-4.7 6.6-4.7s6.6.3 6.6 4.7v30.6H48.8z"
						class="st0"
					/>
					<path
						d="M.4 52.7v-31h16.2c4.7 0 14.3 1.2 14.3 14.4v31.2c0 13.2-9.6 14.4-14.3 14.4H.4v-29zm9.7-.1v-23h4.7c3 0 6.4.2 6.4 8.9v25.9c0 8.7-3.4 8.9-6.4 8.9h-4.7V52.6z"
						style="fill-rule: evenodd; clip-rule: evenodd; fill: #ffffff"
					/>
				</svg>
				<p class="caption">&#8985; logo.svg <span class="opacity-light">(Braun & Dieter Rams Homage)</span></p>
			</div>
			<div class="list">
				<p>
					Dan Newman. Dog Dad. Creative Director. Designer. Pākehā. Wellingtonian.<br class="hide" />
					Nerd. Font Fiend. Camera Collector. Book Buyer. Cricket Fan. List Maker.
				</p>
				<p class="caption">&#8985; list.txt <span class="opacity-light">(Bio)</span></p>
			</div>
			<div class="back">
				<p class="top"><a href="/bookmarks/#top" class="hover">&uarr;</a></p>
				<p class="caption">&#8985; #top <span class="opacity-light">(Link)</span></p>
			</div>
			<hr />
			<p class="mode"><a href="#" class="dark-mode-toggle">&#9654; Dark</a> <span class="opacity-dark">/</span> <a href="#" class="light-mode-toggle">&#9655; Light</a> <span class="opacity-light">(Mode)</span></p>
			<p class="caption">
				Brought to you by the letter D <span class="opacity-light">[U+0044].</span><br />
				<span class="opacity-light">Copyright &copy; 1982—2026.</span>
			</p>
		</footer>
		<script>
			// Light/Dark Mode Toggle - Apply immediately to prevent flash
			(function () {
				const root = document.documentElement;
				const savedMode = localStorage.getItem("colorMode") || "dark";
				if (savedMode === "light") {
					root.classList.add("light-mode");
				}
			})();
		</script>
		<script>
			// Light/Dark Mode Toggle - Event handlers
			document.addEventListener("DOMContentLoaded", function () {
				const root = document.documentElement;
				const darkModeBtns = document.querySelectorAll(".dark-mode-toggle");
				const lightModeBtns = document.querySelectorAll(".light-mode-toggle");

				// Toggle handlers for all dark mode buttons
				darkModeBtns.forEach(function (btn) {
					btn.addEventListener("click", function (e) {
						e.preventDefault();
						root.classList.remove("light-mode");
						localStorage.setItem("colorMode", "dark");
					});
				});

				// Toggle handlers for all light mode buttons
				lightModeBtns.forEach(function (btn) {
					btn.addEventListener("click", function (e) {
						e.preventDefault();
						root.classList.add("light-mode");
						localStorage.setItem("colorMode", "light");
					});
				});
			});
		</script>
	</body>
</html>
